package fr.utbm.ia54.simulationorca.sarlagent

import io.sarl.core.DefaultContextInteractions
import io.sarl.core.Initialize
import io.sarl.core.Lifecycle
import java.util.List
import io.sarl.lang.core.Address
import fr.utbm.ia54.simulationorca.framework.Position
import fr.utbm.ia54.simulationorca.environmentmodel.AgentBody
import java.util.ArrayList

agent Environment{
	
	uses DefaultContextInteractions, Lifecycle
	
	var listAgentBodies : List<AgentBody> = new ArrayList<AgentBody>()
	
	on Initialize{
		spawnPedestrianBodies(occurrence.parameters.get(0) as List<Address>, occurrence.parameters.get(1) as List<Position>)
	}
	
	def spawnPedestrianBodies(listPedestrianAdresses : List<Address>, listInitialPositions : List<Position>){
		for(var i=0; i<listPedestrianAdresses.size(); i++){
			listAgentBodies.add(new AgentBody(listPedestrianAdresses.get(i), listInitialPositions.get(i)))
		}
	}
}